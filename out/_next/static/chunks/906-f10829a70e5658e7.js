"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[906],{933:function(e,n,t){t.d(n,{Xz:function(){return d}});var r=t(968),o=t(7294),i=t(9477);function l(e,n){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>e(...r),n)}}let s=["x","y","top","bottom","left","right","width","height"],u=(e,n)=>s.every(t=>e[t]===n[t]);var a=t(3213),c=t(5893);function f({ref:e,children:n,fallback:t,resize:s,style:a,gl:f,events:d=r.f,eventSource:h,eventPrefix:m,shadows:p,linear:w,flat:v,legacy:b,orthographic:g,frameloop:y,dpr:E,performance:x,raycaster:S,camera:C,scene:z,onPointerMissed:j,onCreated:M,...L}){o.useMemo(()=>(0,r.e)(i),[]);let P=(0,r.u)(),[A,O]=function({debounce:e,scroll:n,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){var i;let s=t||("undefined"==typeof window?class{}:window.ResizeObserver);if(!s)throw Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");let[a,c]=(0,o.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),f=(0,o.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),d=e?"number"==typeof e?e:e.scroll:null,h=e?"number"==typeof e?e:e.resize:null,m=(0,o.useRef)(!1);(0,o.useEffect)(()=>(m.current=!0,()=>void(m.current=!1)));let[p,w,v]=(0,o.useMemo)(()=>{let e=()=>{if(!f.current.element)return;let{left:e,top:n,width:t,height:o,bottom:i,right:l,x:s,y:a}=f.current.element.getBoundingClientRect(),d={left:e,top:n,width:t,height:o,bottom:i,right:l,x:s,y:a};f.current.element instanceof HTMLElement&&r&&(d.height=f.current.element.offsetHeight,d.width=f.current.element.offsetWidth),Object.freeze(d),m.current&&!u(f.current.lastBounds,d)&&c(f.current.lastBounds=d)};return[e,h?l(e,h):e,d?l(e,d):e]},[c,r,d,h]);function b(){f.current.scrollContainers&&(f.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",v,!0)),f.current.scrollContainers=null),f.current.resizeObserver&&(f.current.resizeObserver.disconnect(),f.current.resizeObserver=null),f.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",f.current.orientationHandler))}function g(){f.current.element&&(f.current.resizeObserver=new s(v),f.current.resizeObserver.observe(f.current.element),n&&f.current.scrollContainers&&f.current.scrollContainers.forEach(e=>e.addEventListener("scroll",v,{capture:!0,passive:!0})),f.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",f.current.orientationHandler))}return i=!!n,(0,o.useEffect)(()=>{if(i)return window.addEventListener("scroll",v,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",v,!0)},[v,i]),(0,o.useEffect)(()=>(window.addEventListener("resize",w),()=>void window.removeEventListener("resize",w)),[w]),(0,o.useEffect)(()=>{b(),g()},[n,v,w]),(0,o.useEffect)(()=>b,[]),[e=>{e&&e!==f.current.element&&(b(),f.current.element=e,f.current.scrollContainers=function e(n){let t=[];if(!n||n===document.body)return t;let{overflow:r,overflowX:o,overflowY:i}=window.getComputedStyle(n);return[r,o,i].some(e=>"auto"===e||"scroll"===e)&&t.push(n),[...t,...e(n.parentElement)]}(e),g())},a,p]}({scroll:!0,debounce:{scroll:50,resize:0},...s}),H=o.useRef(null),R=o.useRef(null);o.useImperativeHandle(e,()=>H.current);let B=(0,r.a)(j),[T,F]=o.useState(!1),[_,k]=o.useState(!1);if(T)throw T;if(_)throw _;let Q=o.useRef(null);(0,r.b)(()=>{let e=H.current;O.width>0&&O.height>0&&e&&(Q.current||(Q.current=(0,r.c)(e)),async function(){await Q.current.configure({gl:f,scene:z,events:d,shadows:p,linear:w,flat:v,legacy:b,orthographic:g,frameloop:y,dpr:E,performance:x,raycaster:S,camera:C,size:O,onPointerMissed:(...e)=>null==B.current?void 0:B.current(...e),onCreated:e=>{null==e.events.connect||e.events.connect(h?(0,r.i)(h)?h.current:h:R.current),m&&e.setEvents({compute:(e,n)=>{let t=e[m+"X"],r=e[m+"Y"];n.pointer.set(t/n.size.width*2-1,-(r/n.size.height*2)+1),n.raycaster.setFromCamera(n.pointer,n.camera)}}),null==M||M(e)}}),Q.current.render((0,c.jsx)(P,{children:(0,c.jsx)(r.E,{set:k,children:(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(r.B,{set:F}),children:null!=n?n:null})})}))}())}),o.useEffect(()=>{let e=H.current;if(e)return()=>(0,r.d)(e)},[]);let $=h?"none":"auto";return(0,c.jsx)("div",{ref:R,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:$,...a},...L,children:(0,c.jsx)("div",{ref:A,style:{width:"100%",height:"100%"},children:(0,c.jsx)("canvas",{ref:H,style:{display:"block"},children:t})})})}function d(e){return(0,c.jsx)(a.Hn,{children:(0,c.jsx)(f,{...e})})}t(2576),t(8448),t(3840)},4249:function(e,n,t){let r;t.d(n,{dp:function(){return M},xC:function(){return S},cy:function(){return L},K:function(){return P},sY:function(){return O}});var o=t(5893),i=t(7294),l=t(4250),s=t(968),u=t(2371);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){return(c=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function d(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,s=!1;try{for(o=o.call(e);!(l=(t=o.next()).done)&&(i.push(t.value),!n||i.length!==n);l=!0);}catch(e){s=!0,r=e}finally{try{l||null==o.return||o.return()}finally{if(s)throw r}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return f(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return f(e,n)}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}new l.FM8,new l.FM8;var m=function e(n,t,r){var o=this;h(this,e),a(this,"dot2",function(e,n){return o.x*e+o.y*n}),a(this,"dot3",function(e,n,t){return o.x*e+o.y*n+o.z*t}),this.x=n,this.y=t,this.z=r},p=[new m(1,1,0),new m(-1,1,0),new m(1,-1,0),new m(-1,-1,0),new m(1,0,1),new m(-1,0,1),new m(1,0,-1),new m(-1,0,-1),new m(0,1,1),new m(0,-1,1),new m(0,1,-1),new m(0,-1,-1)],w=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],v=Array(512),b=Array(512);function g(e){var n=function(e){if("number"==typeof e)e=Math.abs(e);else if("string"==typeof e){var n=e;e=0;for(var t=0;t<n.length;t++)e=(e+n.charCodeAt(t)%96*(t+1))%2147483647}return 0===e&&(e=311),e}(e);return function(){var e=48271*n%2147483647;return n=e,e/2147483647}}!function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var n,t=0;t<256;t++)n=1&t?w[t]^255&e:w[t]^e>>8&255,v[t]=v[t+256]=n,b[t]=b[t+256]=p[n%12]}(0),new function e(n){var t=this;h(this,e),a(this,"seed",0),a(this,"init",function(e){t.seed=e,t.value=g(e)}),a(this,"value",g(this.seed)),this.init(n)}(Math.random());var y=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};l.u9r,t(8904);let E=(0,i.createContext)(null),x=e=>(2&e.getAttributes())==2,S=(0,i.memo)((0,i.forwardRef)(({children:e,camera:n,scene:t,resolutionScale:r,enabled:a=!0,renderPriority:c=1,autoClear:f=!0,depthBuffer:d,enableNormalPass:h,stencilBuffer:m,multisampling:p=8,frameBufferType:w=l.cLu},v)=>{let{gl:b,scene:g,camera:y,size:S}=(0,s.A)(),C=t||g,z=n||y,[j,M,L]=(0,i.useMemo)(()=>{let e=new u.xC(b,{depthBuffer:d,stencilBuffer:m,multisampling:p,frameBufferType:w});e.addPass(new u.CD(C,z));let n=null,t=null;return h&&((t=new u.gh(C,z)).enabled=!1,e.addPass(t),void 0!==r&&((n=new u.xs({normalBuffer:t.texture,resolutionScale:r})).enabled=!1,e.addPass(n))),[e,t,n]},[z,b,d,m,p,w,C,h,r]);(0,i.useEffect)(()=>j?.setSize(S.width,S.height),[j,S]),(0,s.C)((e,n)=>{if(a){let e=b.autoClear;b.autoClear=f,m&&!f&&b.clearStencil(),j.render(n),b.autoClear=e}},a?c:0);let P=(0,i.useRef)(null);(0,i.useLayoutEffect)(()=>{let e=[],n=P.current.__r3f;if(n&&j){let t=n.children;for(let n=0;n<t.length;n++){let r=t[n].object;if(r instanceof u.Qm){let o=[r];if(!x(r)){let e=null;for(;(e=t[n+1]?.object)instanceof u.Qm&&!x(e);)o.push(e),n++}let i=new u.H5(z,...o);e.push(i)}else r instanceof u.w2&&e.push(r)}for(let n of e)j?.addPass(n);M&&(M.enabled=!0),L&&(L.enabled=!0)}return()=>{for(let n of e)j?.removePass(n);M&&(M.enabled=!1),L&&(L.enabled=!1)}},[j,e,z,M,L]),(0,i.useEffect)(()=>{let e=b.toneMapping;return b.toneMapping=l.uL9,()=>{b.toneMapping=e}},[b]);let A=(0,i.useMemo)(()=>({composer:j,normalPass:M,downSamplingPass:L,resolutionScale:r,camera:z,scene:C}),[j,M,L,r,z,C]);return(0,i.useImperativeHandle)(v,()=>j,[j]),(0,o.jsx)(E.Provider,{value:A,children:(0,o.jsx)("group",{ref:P,children:e})})})),C=0,z=new WeakMap,j=(e,n)=>function({blendFunction:t=n?.blendFunction,opacity:r=n?.opacity,...l}){let u=z.get(e);if(!u){let n=`@react-three/postprocessing/${e.name}-${C++}`;(0,s.e)({[n]:e}),z.set(e,u=n)}let a=(0,s.A)(e=>e.camera),c=i.useMemo(()=>[...n?.args??[],...l.args??[{...n,...l}]],[JSON.stringify(l)]);return(0,o.jsx)(u,{camera:a,"blendMode-blendFunction":t,"blendMode-opacity-value":r,...l,args:c})};u.Qm;let M=j(u.rk,{blendFunction:0}),L=j(u.xV,{blendFunction:5}),P=(u.p$,(0,i.forwardRef)(function(e,n){let{camera:t,normalPass:r,downSamplingPass:l,resolutionScale:s}=(0,i.useContext)(E),a=(0,i.useMemo)(()=>null===r&&null===l?(console.error("Please enable the NormalPass in the EffectComposer in order to use SSAO."),{}):new u.bn(t,r&&!l?r.texture:null,{blendFunction:21,samples:30,rings:4,distanceThreshold:1,distanceFalloff:0,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.9,radius:20,bias:.5,intensity:1,color:void 0,normalDepthBuffer:l?l.texture:null,resolutionScale:s??1,depthAwareUpsampling:!0,...e}),[t,l,r,s]);return(0,o.jsx)("primitive",{ref:n,object:a,dispose:null})}));var A=((r=A||{})[r.Linear=0]="Linear",r[r.Radial=1]="Radial",r[r.MirroredLinear=2]="MirroredLinear",r);u.Qm;let O=j(u.Dd);u.$L,u.Qm,u.Qm,u.Qm},8304:function(e,n,t){t.d(n,{w:function(){return o}});var r=t(4250);class o{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}new r.iKG(-1,1,1,-1,0,1);class i extends r.u9r{constructor(){super(),this.setAttribute("position",new r.a$l([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new r.a$l([0,2,0,0,2,0],2))}}new i}}]);