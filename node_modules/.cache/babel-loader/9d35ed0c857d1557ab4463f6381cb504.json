{"ast":null,"code":"import _objectSpread from \"/Users/jak/repos/karen/kshack/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n\nvar _jsxFileName = \"/Users/jak/repos/karen/kshack/src/components/ArtistImage.js\",\n    _s = $RefreshSig$();\n\nimport { Canvas, useLoader } from '@react-three/fiber';\nimport { useMemo, Suspense } from 'react';\nimport { TextureLoader } from \"three/src/loaders/TextureLoader\"; // import vertex from '../assets/vertex.glsl'\n// import fragment from '../assets/fragment.glsl'\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar fragmentShader = \"\\nvarying vec3 Normal;\\nvarying vec3 Position;\\n\\nuniform vec3 Ka;\\nuniform vec3 Kd;\\nuniform vec3 Ks;\\nuniform vec4 LightPosition;\\nuniform vec3 LightIntensity;\\nuniform float Shininess;\\n\\nvec3 phong() {\\n  vec3 n = normalize(Normal);\\n  vec3 s = normalize(vec3(LightPosition) - Position);\\n  vec3 v = normalize(vec3(-Position));\\n  vec3 r = reflect(-s, n);\\n\\n  vec3 ambient = Ka;\\n  vec3 diffuse = Kd * max(dot(s, n), 0.0);\\n  vec3 specular = Ks * pow(max(dot(r, v), 0.0), Shininess);\\n\\n  return LightIntensity * (ambient + diffuse + specular);\\n}\\n\\nvoid main() {\\n  vec3 blue = vec3(0.0, 0.0, 1.0);\\n  gl_FragColor = vec4(blue*phong(), 1.0);\\n}\";\nvar vertexShader = \"\\nvarying vec3 Normal;\\nvarying vec3 Position;\\n\\nvoid main() {\\n  Normal = normalize(normalMatrix * normal);\\n  Position = vec3(modelViewMatrix * vec4(position, 1.0));\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n}\\n\";\n/*\n Load texture into shader\n https://codesandbox.io/s/divine-shape-wqf6f?from-embed=&file=/src/App.js:90-155\n*/\n\nexport function ArtistImage(_ref) {\n  _s();\n\n  var src = _ref.src,\n      index = _ref.index;\n  console.log('fragment', fragmentShader);\n  var texture = useLoader(TextureLoader, src);\n  console.log(texture);\n  var data = useMemo(function () {\n    return {\n      uniforms: {\n        uTexture: {\n          value: {\n            texture: _objectSpread(_objectSpread({}, texture), {}, {\n              generateMipmaps: false\n            })\n          }\n        },\n        uTime: {\n          value: 0\n        },\n        uProg: {\n          value: 0\n        },\n        uIndex: {\n          value: index\n        }\n      },\n      fragmentShader: fragmentShader,\n      vertexShader: vertexShader\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Canvas, {\n    children: /*#__PURE__*/_jsxDEV(\"mesh\", {\n      children: [/*#__PURE__*/_jsxDEV(\"planeBufferGeometry\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"shaderMaterial\", _objectSpread({\n        attach: \"material\"\n      }, data), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 3\n  }, this);\n}\n\n_s(ArtistImage, \"C4xoomjLggMQljnwaCNQiz3g+lI=\", false, function () {\n  return [useLoader];\n});\n\n_c = ArtistImage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ArtistImage\");","map":{"version":3,"sources":["/Users/jak/repos/karen/kshack/src/components/ArtistImage.js"],"names":["Canvas","useLoader","useMemo","Suspense","TextureLoader","fragmentShader","vertexShader","ArtistImage","src","index","console","log","texture","data","uniforms","uTexture","value","generateMipmaps","uTime","uProg","uIndex"],"mappings":";;;;;AAAA,SAASA,MAAT,EAAiBC,SAAjB,QAAkC,oBAAlC;AACA,SAASC,OAAT,EAAkBC,QAAlB,QAAkC,OAAlC;AACA,SAASC,aAAT,QAA8B,iCAA9B,C,CAEA;AACA;;;AAEA,IAAMC,cAAc,gpBAApB;AA6BA,IAAMC,YAAY,6PAAlB;AAUA;AACA;AACA;AACA;;AACA,OAAO,SAASC,WAAT,OAAmC;AAAA;;AAAA,MAAbC,GAAa,QAAbA,GAAa;AAAA,MAARC,KAAQ,QAARA,KAAQ;AACxCC,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBN,cAAvB;AACA,MAAMO,OAAO,GAAGX,SAAS,CAACG,aAAD,EAAgBI,GAAhB,CAAzB;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYC,OAAZ;AACA,MAAMC,IAAI,GAAGX,OAAO,CAChB;AAAA,WAAO;AACHY,MAAAA,QAAQ,EAAE;AACNC,QAAAA,QAAQ,EAAE;AAAEC,UAAAA,KAAK,EAAE;AACfJ,YAAAA,OAAO,kCACAA,OADA;AAEHK,cAAAA,eAAe,EAAE;AAFd;AADQ;AAAT,SADJ;AAONC,QAAAA,KAAK,EAAE;AAAEF,UAAAA,KAAK,EAAE;AAAT,SAPD;AAQNG,QAAAA,KAAK,EAAE;AAAEH,UAAAA,KAAK,EAAE;AAAT,SARD;AASNI,QAAAA,MAAM,EAAE;AAAEJ,UAAAA,KAAK,EAAEP;AAAT;AATF,OADP;AAYHJ,MAAAA,cAAc,EAAdA,cAZG;AAaHC,MAAAA,YAAY,EAAZA;AAbG,KAAP;AAAA,GADgB,EAgBhB,EAhBgB,CAApB;AAmBF,sBACE,QAAC,MAAD;AAAA,2BACI;AAAA,8BACA;AAAA;AAAA;AAAA;AAAA,cADA,eAEA;AAAgB,QAAA,MAAM,EAAC;AAAvB,SAAsCO,IAAtC;AAAA;AAAA;AAAA;AAAA,cAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADF;AAQC;;GA/BeN,W;UAEEN,S;;;KAFFM,W","sourcesContent":["import { Canvas, useLoader } from '@react-three/fiber'\nimport { useMemo, Suspense } from 'react'\nimport { TextureLoader } from \"three/src/loaders/TextureLoader\";\n\n// import vertex from '../assets/vertex.glsl'\n// import fragment from '../assets/fragment.glsl'\n\nconst fragmentShader = `\nvarying vec3 Normal;\nvarying vec3 Position;\n\nuniform vec3 Ka;\nuniform vec3 Kd;\nuniform vec3 Ks;\nuniform vec4 LightPosition;\nuniform vec3 LightIntensity;\nuniform float Shininess;\n\nvec3 phong() {\n  vec3 n = normalize(Normal);\n  vec3 s = normalize(vec3(LightPosition) - Position);\n  vec3 v = normalize(vec3(-Position));\n  vec3 r = reflect(-s, n);\n\n  vec3 ambient = Ka;\n  vec3 diffuse = Kd * max(dot(s, n), 0.0);\n  vec3 specular = Ks * pow(max(dot(r, v), 0.0), Shininess);\n\n  return LightIntensity * (ambient + diffuse + specular);\n}\n\nvoid main() {\n  vec3 blue = vec3(0.0, 0.0, 1.0);\n  gl_FragColor = vec4(blue*phong(), 1.0);\n}`\n\nconst vertexShader = `\nvarying vec3 Normal;\nvarying vec3 Position;\n\nvoid main() {\n  Normal = normalize(normalMatrix * normal);\n  Position = vec3(modelViewMatrix * vec4(position, 1.0));\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n`\n/*\n Load texture into shader\n https://codesandbox.io/s/divine-shape-wqf6f?from-embed=&file=/src/App.js:90-155\n*/\nexport function ArtistImage({src, index}) {\n  console.log('fragment',fragmentShader)\n  const texture = useLoader(TextureLoader, src);\n  console.log(texture)\n  const data = useMemo(\n      () => ({\n          uniforms: {\n              uTexture: { value: {\n                  texture: {\n                      ...texture,\n                      generateMipmaps: false,\n                  } \n              }},\n              uTime: { value: 0 },\n              uProg: { value: 0 },\n              uIndex: { value: index },\n          },\n          fragmentShader,\n          vertexShader\n      }),\n      []\n  )\n  \nreturn (\n  <Canvas>\n      <mesh>\n      <planeBufferGeometry />\n      <shaderMaterial attach=\"material\" {...data} />\n      </mesh>\n  </Canvas>\n)\n}\n"]},"metadata":{},"sourceType":"module"}