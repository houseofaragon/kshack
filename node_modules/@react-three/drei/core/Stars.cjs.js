"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/inheritsLoose"),t=require("react"),r=require("@react-three/fiber"),n=require("three");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var i=o(e),u=a(t),c=function(e){function t(){return e.call(this,{uniforms:{time:{value:0},fade:{value:1}},vertexShader:"\n      uniform float time;\n      attribute float size;\n      varying vec3 vColor;\n      void main() {\n        vColor = color;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));\n        gl_Position = projectionMatrix * mvPosition;\n      }",fragmentShader:"\n      uniform sampler2D pointTexture;\n      uniform float fade;\n      varying vec3 vColor;\n      void main() {\n        float opacity = 1.0;\n        if (fade == 1.0) {\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\n        }\n        gl_FragColor = vec4(vColor, opacity);\n      }"})||this}return i.default(t,e),t}(n.ShaderMaterial),f=function(e){return(new n.Vector3).setFromSpherical(new n.Spherical(e,Math.acos(1-2*Math.random()),2*Math.random()*Math.PI))},l=u.forwardRef((function(e,t){var o=e.radius,a=void 0===o?100:o,i=e.depth,l=void 0===i?50:i,s=e.count,d=void 0===s?5e3:s,v=e.saturation,m=void 0===v?0:v,p=e.factor,b=void 0===p?4:p,h=e.fade,g=void 0!==h&&h,y=u.useRef(),j=u.useMemo((function(){for(var e=[],t=[],r=Array.from({length:d},(function(){return(.5+.5*Math.random())*b})),o=new n.Color,i=a+l,u=l/d,c=0;c<d;c++)i-=u*Math.random(),e.push.apply(e,f(i).toArray()),o.setHSL(c/d,m,.9),t.push(o.r,o.g,o.b);return[new Float32Array(e),new Float32Array(t),new Float32Array(r)]}),[d,l,b,a,m]),M=j[0],P=j[1],w=j[2];r.useFrame((function(e){return y.current&&(y.current.uniforms.time.value=e.clock.getElapsedTime())}));var O=u.useState((function(){return new c}))[0];return u.createElement("points",{ref:t},u.createElement("bufferGeometry",{attach:"geometry"},u.createElement("bufferAttribute",{attachObject:["attributes","position"],args:[M,3]}),u.createElement("bufferAttribute",{attachObject:["attributes","color"],args:[P,3]}),u.createElement("bufferAttribute",{attachObject:["attributes","size"],args:[w,1]})),u.createElement("primitive",{dispose:void 0,ref:y,object:O,attach:"material",blending:n.AdditiveBlending,"uniforms-fade-value":g,transparent:!0,vertexColors:!0}))}));exports.Stars=l;
