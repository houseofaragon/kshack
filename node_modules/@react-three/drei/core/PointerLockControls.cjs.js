"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),n=require("@babel/runtime/helpers/objectWithoutPropertiesLoose"),t=require("@react-three/fiber"),r=require("react"),u=require("three-stdlib");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var i=o(e),c=o(n),a=l(r),d=a.forwardRef((function(e,n){var r=e.selector,o=e.onChange,l=e.onLock,d=e.onUnlock,s=c.default(e,["selector","onChange","onLock","onUnlock"]),f=s.camera,v=c.default(s,["camera"]),E=t.useThree((function(e){return e.gl})),L=t.useThree((function(e){return e.camera})),b=t.useThree((function(e){return e.invalidate})),m=f||L,k=a.useState((function(){return new u.PointerLockControls(m,E.domElement)}))[0];return a.useEffect((function(){var e=function(e){b(),o&&o(e)};return null==k||null==k.addEventListener||k.addEventListener("change",e),l&&(null==k||null==k.addEventListener||k.addEventListener("lock",l)),d&&(null==k||null==k.addEventListener||k.addEventListener("unlock",d)),function(){null==k||null==k.removeEventListener||k.removeEventListener("change",e),l&&(null==k||null==k.addEventListener||k.addEventListener("lock",l)),d&&(null==k||null==k.addEventListener||k.addEventListener("unlock",d))}}),[o,l,d,k,b]),a.useEffect((function(){var e=function(){return null==k?void 0:k.lock()},n=r?document.querySelector(r):document;return n&&n.addEventListener("click",e),function(){return n?n.removeEventListener("click",e):void 0}}),[k,r]),k?a.createElement("primitive",i.default({ref:n,dispose:void 0,object:k},v)):null}));exports.PointerLockControls=d;
