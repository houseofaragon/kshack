"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=require("@react-three/fiber"),t=require("three-stdlib");function n(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var u=n(e),i=u.forwardRef((function(e,n){var i=e.intensity,c=void 0===i?1:i,o=e.decay,a=e.decayRate,s=void 0===a?.65:a,l=e.maxYaw,f=void 0===l?.1:l,d=e.maxPitch,v=void 0===d?.1:d,m=e.maxRoll,p=void 0===m?.1:m,y=e.yawFrequency,h=void 0===y?1:y,b=e.pitchFrequency,x=void 0===b?1:b,w=e.rollFrequency,O=void 0===w?1:w,S=e.controls,g=r.useThree((function(e){return e.camera})),j=r.useThree((function(e){return e.controls})),q=u.useRef(c),R=u.useRef(g.rotation.clone()),T=u.useState((function(){return new t.SimplexNoise}))[0],E=u.useState((function(){return new t.SimplexNoise}))[0],F=u.useState((function(){return new t.SimplexNoise}))[0],P=function(){(q.current<0||q.current>1)&&(q.current=q.current<0?0:1)};return u.useImperativeHandle(n,(function(){return{getIntensity:function(){return q.current},setIntensity:function(e){q.current=e,P()}}}),[]),u.useEffect((function(){var e=j||(null==S?void 0:S.current),r=function(){R.current=g.rotation.clone()};return null==e||e.addEventListener("change",r),function(){null==e||e.removeEventListener("change",r)}}),[S,j]),r.useFrame((function(e,r){var t=e.clock,n=Math.pow(q.current,2),u=f*n*T.noise(t.elapsedTime*h,1),i=v*n*E.noise(t.elapsedTime*x,1),c=p*n*F.noise(t.elapsedTime*O,1);g.rotation.set(R.current.x+i,R.current.y+u,R.current.z+c),o&&q.current>0&&(q.current-=s*r,P())})),null}));exports.CameraShake=i;
