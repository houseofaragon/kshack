"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/objectWithoutPropertiesLoose"),r=require("three"),t=require("react"),n=require("@react-three/fiber");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var o=u(e),a=i(t);exports.CubeCamera=function(e){var t=e.children,u=e.fog,i=e.frames,f=void 0===i?1/0:i,c=e.resolution,l=void 0===c?256:c,s=e.near,d=void 0===s?1:s,b=e.far,g=void 0===b?1e3:b,m=o.default(e,["children","fog","frames","resolution","near","far"]),v=a.useRef(),p=a.useState(),h=p[0],j=p[1],O=n.useThree((function(e){return e.scene})),F=n.useThree((function(e){return e.gl})),y=a.useMemo((function(){return new r.WebGLCubeRenderTarget(l,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBFormat,encoding:F.outputEncoding})}),[l]),E=0;return n.useFrame((function(){if(h&&v.current&&(f===1/0||E<f)){v.current.traverse((function(e){return e.visible=!1}));var e=O.fog;O.fog=u||e,h.update(F,O),O.fog=e,v.current.traverse((function(e){return e.visible=!0})),E++}})),a.createElement("group",m,a.createElement("cubeCamera",{ref:j,args:[d,g,y]}),a.createElement("group",{ref:v},t(y.texture)))};
